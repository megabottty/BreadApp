<nav class="main-nav">
  <a routerLink="/store" class="nav-brand" (click)="closeMenu()">{{title()}}</a>

  <button class="menu-toggle" (click)="toggleMenu()" [attr.aria-expanded]="isMenuOpen()" aria-label="Toggle navigation">
    <span class="hamburger"></span>
  </button>

  <div class="nav-links" [class.open]="isMenuOpen()">
    @if (authService.isBaker()) {
      <a routerLink="/calculator" routerLinkActive="active" (click)="closeMenu()">Recipe Lab</a>
    }
    <a routerLink="/store" routerLinkActive="active" (click)="closeMenu()">Storefront</a>
    <a routerLink="/about" routerLinkActive="active" (click)="closeMenu()">About Us</a>
    <a routerLink="/experimental" routerLinkActive="active" (click)="closeMenu()">Experimental Kitchen</a>
    <a routerLink="/cart" routerLinkActive="active" class="cart-link" (click)="closeMenu()">
      Bag
      @if (cartService.totalCount() > 0) {
        <span class="cart-badge">{{cartService.totalCount()}}</span>
      }
    </a>
    @if (authService.isCustomer()) {
      <a routerLink="/profile" routerLinkActive="active" (click)="closeMenu()">My Orders</a>
    }

    <div class="auth-controls">
      @if (!authService.isAuthenticated()) {
        <a routerLink="/login" class="btn-auth" (click)="closeMenu()">Login</a>
      } @else {
        <span class="user-name">{{authService.user()?.name}}</span>
        <button (click)="logout()" class="btn-auth logout">Logout</button>
      }
    </div>
  </div>
</nav>

<main>
  <router-outlet />
</main>
